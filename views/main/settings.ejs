
<div class="container px-6 mx-auto grid">
  <div class="mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300">
  </div>
  <div class="grid gap-6 mb-8 md:grid-cols-1 xl:grid-cols-1">
    <div class="flex items-center p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
      <div>
        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"  >
          Main settings
        </h2>
        <div class ="flex justify-start space-x-6">
          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Main window Margin X </span>
            <input
              id = "mainWindowMarginX"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="X"
            />
          </label>

          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Main window Margin Y </span>
            <input
              id = "mainWindowMarginY"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="Y"
            />
          </label>

        </div>

        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
        Items window settings
        </h2>

        <div class ="flex justify-start space-x-6">
          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Items window Margin X</span>
            <input
              id = "itemsWindowMarginX"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="X"
            />
          </label>

          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Items window margin  Y</span>
            <input
              id = "itemsWindowMarginY"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="Y"
            />
          </label>

          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Items width</span>
            <input
              id = "itemsWidth"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="W"
            />
          </label>

          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Items height</span>
            <input
              id = "itemsHeight"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="H"
            />
          </label>

          <label class="flex items-center space-x-2">
            <input type="checkbox" id="settingItemsBorder" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
            <span class="dark:text-white ml-4">Items window border</span>
          </label>
        </div>

        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
        Clear button settings
        </h2>
      
        <div class ="flex justify-start space-x-6">
          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Button  Margin X </span>
            <input
              id = "buttonMarginX"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="X"
            />
          </label>

          <label class="block text-sm">
            <span class="text-gray-700 dark:text-gray-400">Button  Margin Y </span>
            <input
              id = "buttonMarginY"
              class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
              placeholder="Y"
            />
          </label>
        </div>

        <h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
          üìä Resource Overlay Settings
        </h2>

        <div class="grid grid-cols-2 gap-4">
          <!-- Enchantment Indicator -->
          <div class="p-4 border border-gray-300 dark:border-gray-600 rounded-lg">
            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">
              ‚ú® Enchantment Indicator
            </h3>
            <label class="flex items-center space-x-2 mb-2">
              <input type="checkbox" id="settingResourceEnchantOverlay" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
              <span class="dark:text-white">Static resources (.1, .2, .3, .4)</span>
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" id="settingLivingResourceEnchantOverlay" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
              <span class="dark:text-white">Living resources (.1, .2, .3, .4)</span>
            </label>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
              Displays colored dots for enchanted resources
            </p>
          </div>

          <!-- Resource Count Badge -->
          <div class="p-4 border border-gray-300 dark:border-gray-600 rounded-lg">
            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">
              üì¶ Resource Count Badge
            </h3>
            <label class="flex items-center space-x-2">
              <input type="checkbox" id="settingResourceCount" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
              <span class="dark:text-white">Show resource quantity</span>
            </label>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
              Shows total resources considering bonuses
            </p>
          </div>

          <!-- Distance Indicator -->
          <div class="p-4 border border-gray-300 dark:border-gray-600 rounded-lg">
            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">
              üìç Distance Indicator
            </h3>
            <label class="flex items-center space-x-2 mb-2">
              <input type="checkbox" id="settingResourceDistance" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
              <span class="dark:text-white">Show distance from player</span>
            </label>
            <label class="flex items-center space-x-2 ml-7">
              <input type="checkbox" id="settingResourceDistanceLivingOnly" class="h-4 w-4 text-indigo-600 border-gray-300 rounded-md">
              <span class="text-sm dark:text-white">Living resources only</span>
            </label>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
              Distance in meters (color-coded by proximity)
            </p>
          </div>

          <!-- Cluster Indicator -->
          <div class="p-4 border border-gray-300 dark:border-gray-600 rounded-lg">
            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-3">
              üóÇÔ∏è Cluster Indicator
            </h3>
            <label class="flex items-center space-x-2 mb-3">
              <input type="checkbox" id="settingResourceClusters" class="h-5 w-5 text-indigo-600 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
              <span class="dark:text-white">Show resource clusters</span>
            </label>
            <div class="ml-7 space-y-3">
              <label class="block text-sm">
                <span class="text-gray-700 dark:text-gray-400 text-xs">Cluster radius (meters)</span>
                <input
                  id="settingClusterRadius"
                  type="number"
                  min="10"
                  max="100"
                  step="5"
                  class="block w-24 mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  placeholder="30"
                />
              </label>
              <label class="block text-sm">
                <span class="text-gray-700 dark:text-gray-400 text-xs">Min resources per cluster</span>
                <input
                  id="settingClusterMinSize"
                  type="number"
                  min="2"
                  max="10"
                  step="1"
                  class="block w-24 mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  placeholder="2"
                />
              </label>
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
              Groups nearby resources of same type/tier
            </p>
          </div>
        </div>

        <div class="mt-4 p-3 bg-blue-100 dark:bg-blue-900 rounded-lg">
          <p class="text-sm text-blue-800 dark:text-blue-200">
            üí° <strong>Tip:</strong> Distance and cluster indicators work best for tracking valuable resources.
            Disable them for better performance when not needed.
          </p>
        </div>
      </div>
    </div>

    <div class="flex items-start p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
      <div>
        <button
        class="px-5 py-3 font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple"
        onclick="LoadSettings();"
        disabled
        >
          <p>Load Settings</p>
        </button>

        <button
        class="px-5 py-3 font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple"
        onclick="SaveSettings();"
        disabled
        >
          <p>Save Settings File</p>
        </button>
      </div>
    </div>
  </div>
</div>
        

  <script>
    // TODO
    function LoadSettings()
    {
      fetch('/config/tests.json')
      .then(response => response.json())
      .then(jsonResponse => {
        console.log(jsonResponse);
      });
    }

    function SaveSettings()
    {

    }


    // Get references to the input fields and checkboxes
    const mainWindowMarginXInput = document.getElementById("mainWindowMarginX");
    const mainWindowMarginYInput = document.getElementById("mainWindowMarginY");
    const itemsWindowMarginXInput = document.getElementById("itemsWindowMarginX");
    const itemsWindowMarginYInput = document.getElementById("itemsWindowMarginY");
    const settingItemsBorderCheckbox = document.getElementById("settingItemsBorder");

    const buttonMarginXInput = document.getElementById("buttonMarginX");
    const buttonMarginYInput = document.getElementById("buttonMarginY");

    const itemsWidthInput = document.getElementById("itemsWidth");
    const itemsHeightInput = document.getElementById("itemsHeight");

    // Overlay settings (using setting* prefix for consistency)

    const settingResourceEnchantOverlayCheckbox = document.getElementById("settingResourceEnchantOverlay");
    const settingLivingResourceEnchantOverlayCheckbox = document.getElementById("settingLivingResourceEnchantOverlay");
    const settingResourceCountCheckbox = document.getElementById("settingResourceCount");
    const settingResourceDistanceCheckbox = document.getElementById("settingResourceDistance");
    const settingResourceDistanceLivingOnlyCheckbox = document.getElementById("settingResourceDistanceLivingOnly");
    const settingResourceClustersCheckbox = document.getElementById("settingResourceClusters");
    const settingClusterRadiusInput = document.getElementById("settingClusterRadius");
    const settingClusterMinSizeInput = document.getElementById("settingClusterMinSize");

    // Function to save a value to local storage
    function saveToLocalStorage(key, value) {
      localStorage.setItem(key, value);
    }

    // Function to retrieve a value from local storage
    function getFromLocalStorage(key) {
      return localStorage.getItem(key);
    }

    // Add event listeners to the input fields

        itemsWidthInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("itemsWidth", value);
    });


        itemsHeightInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("itemsHeight", value);
    });

        buttonMarginXInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("buttonMarginX", value);
    });


        buttonMarginYInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("buttonMarginY", value);
    });



    mainWindowMarginXInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("mainWindowMarginX", value);
    });

    mainWindowMarginYInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("mainWindowMarginY", value);
    });

    itemsWindowMarginXInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("itemsWindowMarginX", value);
    });

    itemsWindowMarginYInput.addEventListener("input", function (event) {
      const value = event.target.value;
      saveToLocalStorage("itemsWindowMarginY", value);
    });

    // Add event listener to the checkbox
    settingItemsBorderCheckbox.addEventListener("change", function (event) {
      const isChecked = event.target.checked;
      saveToLocalStorage("settingItemsBorder", isChecked);
    });

    // Overlay event listeners (using setting* prefix)
    settingResourceEnchantOverlayCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingResourceEnchantOverlay", event.target.checked);
    });

    settingLivingResourceEnchantOverlayCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingLivingResourceEnchantOverlay", event.target.checked);
    });

    settingResourceCountCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingResourceCount", event.target.checked);
    });

    settingResourceDistanceCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingResourceDistance", event.target.checked);
    });

    settingResourceDistanceLivingOnlyCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingResourceDistanceLivingOnly", event.target.checked);
    });

    settingResourceClustersCheckbox.addEventListener("change", function (event) {
      saveToLocalStorage("settingResourceClusters", event.target.checked);
    });

    settingClusterRadiusInput.addEventListener("input", function (event) {
      saveToLocalStorage("settingClusterRadius", event.target.value);
    });

    settingClusterMinSizeInput.addEventListener("input", function (event) {
      saveToLocalStorage("settingClusterMinSize", event.target.value);
    });

    // Initialize the input fields and checkboxes with values from local storage (if available)
    mainWindowMarginXInput.value = getFromLocalStorage("mainWindowMarginX") || "";
    mainWindowMarginYInput.value = getFromLocalStorage("mainWindowMarginY") || "";
    itemsWindowMarginXInput.value = getFromLocalStorage("itemsWindowMarginX") || "";
    itemsWindowMarginYInput.value = getFromLocalStorage("itemsWindowMarginY") || "";

    itemsWidth.value = getFromLocalStorage("itemsWidth") || "";
    itemsHeight.value = getFromLocalStorage("itemsHeight") || "";

    buttonMarginXInput.value = getFromLocalStorage("buttonMarginX") || "";
    buttonMarginYInput.value = getFromLocalStorage("buttonMarginY") || "";
    settingItemsBorderCheckbox.checked = getFromLocalStorage("settingItemsBorder") === "true";

    // Initialize overlay settings (defaults to enabled for better UX)
    settingResourceEnchantOverlayCheckbox.checked = getFromLocalStorage("settingResourceEnchantOverlay") === null ? true : getFromLocalStorage("settingResourceEnchantOverlay") === "true";
    settingLivingResourceEnchantOverlayCheckbox.checked = getFromLocalStorage("settingLivingResourceEnchantOverlay") === null ? true : getFromLocalStorage("settingLivingResourceEnchantOverlay") === "true";
    settingResourceCountCheckbox.checked = getFromLocalStorage("settingResourceCount") === null ? true : getFromLocalStorage("settingResourceCount") === "true";
    settingResourceDistanceCheckbox.checked = getFromLocalStorage("settingResourceDistance") === null ? false : getFromLocalStorage("settingResourceDistance") === "true";
    settingResourceDistanceLivingOnlyCheckbox.checked = getFromLocalStorage("settingResourceDistanceLivingOnly") === null ? true : getFromLocalStorage("settingResourceDistanceLivingOnly") === "true";
    settingResourceClustersCheckbox.checked = getFromLocalStorage("settingResourceClusters") === null ? false : getFromLocalStorage("settingResourceClusters") === "true";
    settingClusterRadiusInput.value = getFromLocalStorage("settingClusterRadius") || "30";
    settingClusterMinSizeInput.value = getFromLocalStorage("settingClusterMinSize") || "2";

    // Empty SetLanguage function for compatibility with layout.ejs ChangeLanguage
    function SetLanguage(lang) {
      console.log('[Settings] Language changed to:', lang);
    }
  </script>